regex_definitions:
  # Regular expression to match 5-digit zip prefix
  kZipPrefixValueRe:
    regex_fragment: (?:\d{5})

  # Regular expression to match 4-digit zip suffix
  kZipSuffixValueRe:
    regex_fragment: (?:\d{4})

capture_definitions:
  ParsePostalCodeExpression:
    capture:
      output: postal-code
      parts:
      - capture:
          output: postal-code-prefix
          parts: [ {regex_reference: kZipPrefixValueRe} ]
      - no_capture:
          parts:
          - separator: {regex_reference: kZipCodeSeparatorsRe}
          quantifier: MATCH_OPTIONAL
      - capture:
          output: postal-code-suffix
          parts: [ {regex_reference: kZipSuffixValueRe} ]
          quantifier: MATCH_OPTIONAL

parsing_definitions:
  postal-code:
    decomposition:
      capture_reference: ParsePostalCodeExpression

test_parsing_definitions:
- id: "zip code with suffix"
  type: postal-code
  input: "90210-5555"
  output:
    postal-code-prefix: "90210"
    postal-code-suffix: "5555"
- id: "zip code without suffix"
  type: postal-code
  input: "90210"
  output:
    postal-code-prefix: "90210"
    postal-code-suffix: ""
- id: "zip code with extra spaces"
  type: postal-code
  input: "90210 - 5555"
  output:
    postal-code-prefix: "90210"
    postal-code-suffix: "5555" 
- id: "zip code without separator"
  type: postal-code
  input: "902105555"
  output:
    postal-code-prefix: "90210"
    postal-code-suffix: "5555" 
